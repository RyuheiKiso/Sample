# ディレクトリ構成(Rust)

---

## 概要

バーティカルスライスを採用

---

## ディレクトリ構成

```
backend/
├── Cargo.toml
├── Cargo.lock
├── src/
│   ├── main.rs               # エントリポイント
│   ├── lib.rs                # ライブラリ（必要に応じて）
│   ├── api/                  # gRPCやOpenAPIの仕様ファイル
│   │   ├── proto/            # gRPC用protoファイル
│   │   │   └── auth.proto
│   │   └── openapi/          # REST用OpenAPI仕様ファイル
│   │       └── openapi.yaml
│   ├── configs/              # 設定ファイル
│   │   └── config.yaml
│   ├── data/                 # データベースや永続データ
│   │   └── app.db
│   ├── common/               # 共通関数・ユーティリティ
│   │   ├── util.rs
│   │   └── db.rs
│   ├── user/                 # ユーザー機能
│   │   ├── rest_handler.rs   # REST用ハンドラ
│   │   ├── grpc_handler.rs   # gRPC用ハンドラ
│   │   ├── service.rs
│   │   └── repository.rs
│   ├── login/                # ログイン機能
│   │   ├── rest_handler.rs
│   │   ├── grpc_handler.rs
│   │   ├── service.rs
│   │   ├── repository.rs
│   │   ├── client.rs
│   │   └── proto/
│   │       └── auth.rs       # tonicで生成したRustコード
│   └── product/              # 商品機能
│       ├── rest_handler.rs
│       ├── grpc_handler.rs
│       ├── service.rs
│       └── repository.rs
├── router/                   # ルーティング（REST/gRPC分離）
│   ├── rest.rs
│   └── grpc.rs
├── bin/                      # サブコマンドや追加バイナリ
│   └── migration.rs
├── scripts/                  # 開発・ビルド・デプロイ用スクリプト
│   └── migrate.sh
└── tests/                    # 統合テスト・E2Eテスト
    └── integration_test.rs
```

### 主なポイント

- `src/` … Rustのメインソースディレクトリ。機能ごとにディレクトリ分割
- `api/` … gRPCやOpenAPIの仕様ファイルを集約
- `configs/` … 設定ファイル（YAML, TOML等）
- `common/` … 共通処理
- `bin/` … サブコマンドや追加バイナリ
- `scripts/` … マイグレーションやビルド等のスクリプト
- `tests/` … 統合テストやE2Eテスト

---