# ディレクトリ構成(React)

---

## 概要

バーティカルスライスを採用  
状態管理にはRedux（Redux Toolkit）を使用

---

## ディレクトリ構成例

```
src/
├── proto/                 # gRPC用protoファイルや型生成物の配置例
│   ├── auth.proto         # gRPCサービス定義ファイル
│   ├── auth.ts            # protobuf-ts等で生成された型定義
│   └── auth.client.ts     # gRPCクライアント生成物
├── features/
│   ├── user/
│   │   ├── components/
│   │   │   └── UserProfile.tsx
│   │   ├── hooks/
│   │   │   └── useUser.ts
│   │   ├── api/
│   │   │   └── userApi.ts
│   │   ├── types.ts
│   │   └── index.tsx
│   ├── login/
│   │   ├── components/
│   │   │   └── LoginForm.tsx
│   │   ├── hooks/
│   │   │   └── useLogin.ts
│   │   ├── api/
│   │   │   └── loginApi.ts      # gRPCクライアント利用例
│   │   ├── types.ts
│   │   └── index.tsx
│   └── ...
├── shared/
│   ├── components/
│   │   ├── Header.tsx
│   │   ├── Body.tsx
│   │   └── Footer.tsx
│   ├── hooks/
│   │   └── useWindowSize.ts
│   ├── utils/
│   │   └── formatDate.ts
│   ├── types/
│   │   └── common.ts
│   └── api/
│       └── apiClient.ts
├── app/
│   ├── App.tsx
│   ├── routes.tsx
│   └── store.ts           # Redux Toolkitによるストア定義
├── assets/
│   ├── logo.png
│   └── fonts/
│       └── Roboto.ttf
├── styles/
│   └── global.css
└── index.tsx
```

## 各ディレクトリの説明

- **src/proto/**  
  gRPCサービス定義ファイル（auth.proto）や型生成物（auth.ts、auth.client.ts）を配置。サーバー・クライアント間で共通利用することで型安全な通信を実現。

- **features/login/api/**  
  ログイン機能に関連する通信処理をまとめる。`loginApi.ts`で`proto`ディレクトリ内の`auth.ts`や`auth.client.ts`を参照して利用。

- **features/**  
  機能単位でディレクトリを分割。各機能ごとにコンポーネント・フック・API・型定義などをまとめる。
  - **login/**  
    ログイン機能に関するコンポーネント（LoginForm.tsx）、フック（useLogin.ts）、API通信（loginApi.ts）、型定義（types.ts）などを配置。  
    ※gRPCを利用する場合は、`loginApi.ts`でgRPCクライアントを用いた通信処理を実装します（例：@improbable-eng/grpc-webやgrpc-web公式クライアント等を利用）。

- **shared/**  
  複数機能で共通利用するコンポーネントやフック、ユーティリティなどを配置。
  - **shared/components/**  
    ヘッダー、ボディ、フッターなどの汎用レイアウトコンポーネントを配置。
  - **shared/api/**  
    APIクライアントや共通ヘッダー設定、エラーハンドリングなどAPIの共通機能を配置。

- **app/**  
  アプリ全体のルーティングや状態管理(store)など、グローバルな設定を管理。
  - **store.ts**  
    Redux Toolkitでストアを定義。各featuresのsliceをまとめて管理。

- **assets/**  
  画像やフォントなどの静的アセット。

- **styles/**  
  グローバルなCSSやテーマ設定。

- **index.tsx**  
  アプリケーションのエントリポイント。

---

## Redux Toolkitによるストア定義例（app/store.ts）

```typescript
// filepath: src/app/store.ts
import { configureStore } from '@reduxjs/toolkit';
import userReducer from '../features/user/userSlice';

export const store = configureStore({
  reducer: {
    user: userReducer,
    // 他のsliceもここに追加
  },
});

export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

---

---

